{"version":3,"sources":["assets\\Scripts\\game.js"],"names":["Bird","require","Pipes","AudioMusic","cc","Class","Component","properties","Bg0","type","Node","Bg1","BirdSp","PipeSp","ScoreLabel","Label","scoreAudio","AudioClip","gameStartBtn","Button","gameScore","gameStatus","GameStatus","Game_Ready","onLoad","init","node","getChildByName","getComponent","on","EventType","TOUCH_END","touchGameStartBtn","start","update","dt","Game_Playing","x","event","resetScore","active","birdGameStart","resetPipePos","gameOver","Game_Over","string","toString","playMusic","gainScore","pos","playFlySound"],"mappings":"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","sourceRoot":"/","sourcesContent":["import { GameStatus } from './enum';\r\nconst Bird = require('bird');\r\nconst Pipes = require('pipes');\r\nconst AudioMusic = require('./audio');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Bg0: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        Bg1: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        BirdSp: {\r\n            default: null,\r\n            type: Bird\r\n        },\r\n        PipeSp: {\r\n            default: null,\r\n            type: Pipes\r\n        },\r\n        AudioMusic: {\r\n            default: null,\r\n            type: AudioMusic\r\n        },\r\n        // ScoreLabel引用\r\n        ScoreLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 得分音效资源\r\n        scoreAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        // 开始游戏按钮\r\n        gameStartBtn: {\r\n            default: null,\r\n            type: cc.Button,\r\n        },\r\n        // 游戏得分\r\n        gameScore: 0,\r\n        // 游戏状态\r\n        gameStatus: GameStatus.Game_Ready,\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        this.BirdSp.init(this);\r\n        this.PipeSp.init(this);\r\n        this.AudioMusic = this.node.getChildByName(\"AudioMusic\").getComponent('audio');\r\n        // 为开始游戏按钮绑定事件\r\n        this.gameStartBtn.node.on(cc.Node.EventType.TOUCH_END, this.touchGameStartBtn, this);\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        // 若游戏不在进行中，则不进行后续操作\r\n        if (this.gameStatus != GameStatus.Game_Playing) return\r\n\r\n        // 移动背景图\r\n        this.Bg0.x -= 1;\r\n        this.Bg1.x -= 1;\r\n\r\n        if (this.Bg0.x <= -288) this.Bg0.x = 288;\r\n        if (this.Bg1.x <= -288) this.Bg1.x = 288;\r\n\r\n    },\r\n    // 触摸开始游戏按钮，开始游戏\r\n    touchGameStartBtn: function (event) {\r\n        // 改变游戏状态\r\n        this.gameStatus = GameStatus.Game_Playing;\r\n        // 开始游戏时重置分数\r\n        this.resetScore();\r\n        // 隐藏开始按钮\r\n        this.gameStartBtn.node.active = false;\r\n        // 小鸟开始游戏\r\n        this.BirdSp.birdGameStart();\r\n        // 开始游戏是重置水管位置\r\n        this.PipeSp.resetPipePos();\r\n    },\r\n    // 游戏结束\r\n    gameOver: function () {\r\n        \r\n        this.gameStatus = GameStatus.Game_Over;\r\n        this.ScoreLabel.string = this.gameScore.toString();\r\n        // 显示开始游戏按钮\r\n        this.gameStartBtn.node.active = true;\r\n        // 播放游戏结束音效\r\n        this.AudioMusic.playMusic('gameOver');\r\n    },\r\n    // 更新分数\r\n    gainScore: function (pos) {\r\n        this.gameScore++;\r\n        this.ScoreLabel.string = this.gameScore.toString();\r\n        // 播放得分音效\r\n        this.AudioMusic.playMusic('score');\r\n    },\r\n\r\n    // 重置分数\r\n    resetScore: function () {\r\n        this.gameScore = 0;\r\n        this.ScoreLabel.string = this.gameScore.toString();\r\n    },\r\n\r\n    // 播放小鸟飞行音乐\r\n    playFlySound: function () {\r\n        // 若游戏不在进行中则不播放音乐 \r\n        if (this.gameStatus != GameStatus.Game_Playing) return;\r\n        this.AudioMusic.playMusic('fly');\r\n    }\r\n\r\n});\r\n"]}