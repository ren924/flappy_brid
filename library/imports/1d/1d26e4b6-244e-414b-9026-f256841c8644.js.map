{"version":3,"sources":["assets\\Scripts\\bird.js"],"names":["cc","Class","Component","properties","birdSpeed","gameOverSp","type","Node","onLoad","touchReceiver","Canvas","instance","node","on","onTouchStart","onTouchEnd","active","CollManager","director","getCollisionManager","init","game","onDestroy","off","start","update","dt","gameStatus","GameStatus","Game_Playing","y","gameOver","event","playFlySound","birdGameStart","enabled","onCollisionEnter","other","self"],"mappings":";;;;;;AAAA;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAELC,EAAAA,UAAU,EAAE;AACR;AACAC,IAAAA,SAAS,EAAE,CAFH;AAGR;AACAC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEN,EAAE,CAACO;AAFD;AAJJ,GAFP;AAYL;AAEAC,EAAAA,MAdK,oBAcI;AACL;AACA,QAAIC,aAAa,GAAGT,EAAE,CAACU,MAAH,CAAUC,QAAV,CAAmBC,IAAvC;AACAH,IAAAA,aAAa,CAACI,EAAd,CAAiB,YAAjB,EAA+B,KAAKC,YAApC,EAAkD,IAAlD;AACAL,IAAAA,aAAa,CAACI,EAAd,CAAiB,UAAjB,EAA6B,KAAKE,UAAlC,EAA8C,IAA9C,EAJK,CAKL;;AACA,SAAKV,UAAL,CAAgBW,MAAhB,GAAyB,KAAzB,CANK,CAOL;;AACA,SAAKC,WAAL,GAAmBjB,EAAE,CAACkB,QAAH,CAAYC,mBAAZ,EAAnB;AACH,GAvBI;AAyBLC,EAAAA,IAAI,EAAE,cAAUC,IAAV,EAAgB;AAClB,SAAKA,IAAL,GAAYA,IAAZ;AACH,GA3BI;AA6BLC,EAAAA,SA7BK,uBA6BO;AACR;AACA,QAAIb,aAAa,GAAGT,EAAE,CAACU,MAAH,CAAUC,QAAV,CAAmBC,IAAvC;AACAH,IAAAA,aAAa,CAACc,GAAd,CAAkB,YAAlB,EAAgC,KAAKT,YAArC,EAAmD,IAAnD;AACAL,IAAAA,aAAa,CAACc,GAAd,CAAkB,UAAlB,EAA8B,KAAKR,UAAnC,EAA+C,IAA/C;AACH,GAlCI;AAoCLS,EAAAA,KApCK,mBAoCG,CAAG,CApCN;AAsCLC,EAAAA,MAtCK,kBAsCEC,EAtCF,EAsCM;AACP;AACA,QAAI,KAAKL,IAAL,CAAUM,UAAV,IAAwBC,iBAAWC,YAAvC,EAAqD;AACjD,WAAKzB,SAAL,IAAkB,IAAlB;AACA,WAAKQ,IAAL,CAAUkB,CAAV,IAAe,KAAK1B,SAApB,CAFiD,CAGjD;;AACA,UAAI,KAAKQ,IAAL,CAAUkB,CAAV,IAAe,GAAf,IAAsB,KAAKlB,IAAL,CAAUkB,CAAV,IAAe,CAAC,GAA1C,EAA+C;AAC3C,aAAKC,QAAL;AACH;AACJ;AAEJ,GAjDI;AAmDL;AACAjB,EAAAA,YApDK,wBAoDQkB,KApDR,EAoDe;AAChB;AACA,SAAKX,IAAL,CAAUY,YAAV;AACA,SAAK7B,SAAL,GAAiB,CAAjB;AACH,GAxDI;AA0DL;AACAW,EAAAA,UA3DK,sBA2DMiB,KA3DN,EA2Da;AACd,SAAK5B,SAAL,GAAiB,CAAjB;AACH,GA7DI;AA+DL;AACA8B,EAAAA,aAAa,EAAE,yBAAY;AACvB;AACA,SAAK7B,UAAL,CAAgBW,MAAhB,GAAyB,KAAzB,CAFuB,CAGvB;;AACA,SAAKJ,IAAL,CAAUkB,CAAV,GAAc,CAAd,CAJuB,CAKvB;;AACA,SAAKb,WAAL,CAAiBkB,OAAjB,GAA2B,IAA3B;AACH,GAvEI;;AAyEL;AACJ;AACA;AACA;AACA;AACIC,EAAAA,gBA9EK,4BA8EYC,KA9EZ,EA8EmBC,IA9EnB,EA8EyB;AAC1B,SAAKP,QAAL;AACH,GAhFI;AAkFLA,EAAAA,QAlFK,sBAkFM;AACP,SAAKV,IAAL,CAAUU,QAAV,GADO,CAEP;;AACA,SAAKd,WAAL,CAAiBkB,OAAjB,GAA2B,KAA3B,CAHO,CAIP;;AACA,SAAK9B,UAAL,CAAgBW,MAAhB,GAAyB,IAAzB;AACH;AAxFI,CAAT","sourceRoot":"/","sourcesContent":["import { GameStatus } from './enum';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        // 小鸟移动速度\r\n        birdSpeed: 0,\r\n        // 游戏结束图片\r\n        gameOverSp: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // 监听Canvas触摸事件\r\n        var touchReceiver = cc.Canvas.instance.node;\r\n        touchReceiver.on('touchstart', this.onTouchStart, this);\r\n        touchReceiver.on('touchend', this.onTouchEnd, this);\r\n        // 默认不显示游戏结束图\r\n        this.gameOverSp.active = false;\r\n        // 碰撞检测\r\n        this.CollManager = cc.director.getCollisionManager();\r\n    },\r\n\r\n    init: function (game) {\r\n        this.game = game;\r\n    },\r\n\r\n    onDestroy() {\r\n        // 取消触摸事件监听\r\n        var touchReceiver = cc.Canvas.instance.node;\r\n        touchReceiver.off('touchstart', this.onTouchStart, this);\r\n        touchReceiver.off('touchend', this.onTouchEnd, this);\r\n    },\r\n\r\n    start() { },\r\n\r\n    update(dt) {\r\n        // 当游戏状态为进行中时开始运动\r\n        if (this.game.gameStatus == GameStatus.Game_Playing) {\r\n            this.birdSpeed -= 0.05;\r\n            this.node.y += this.birdSpeed;\r\n            // 判断边界\r\n            if (this.node.y >= 256 || this.node.y <= -256) {\r\n                this.gameOver();\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    // 触摸开始时\r\n    onTouchStart(event) {\r\n        // 播放小鸟飞行音乐\r\n        this.game.playFlySound();\r\n        this.birdSpeed = 2;\r\n    },\r\n\r\n    // 触摸结束时\r\n    onTouchEnd(event) {\r\n        this.birdSpeed = 0;\r\n    },\r\n\r\n    // 点击开始游戏按钮后\r\n    birdGameStart: function () {\r\n        //  隐藏游戏结束图\r\n        this.gameOverSp.active = false;\r\n        // 重置小鸟位置\r\n        this.node.y = 0;\r\n        // 开启碰撞检测\r\n        this.CollManager.enabled = true;\r\n    },\r\n\r\n    /**\r\n     * 当碰撞产生的时候调用\r\n     * @param  {Collider} other 产生碰撞的另一个碰撞组件\r\n     * @param  {Collider} self  产生碰撞的自身的碰撞组件\r\n     */\r\n    onCollisionEnter(other, self) {\r\n        this.gameOver();\r\n    },\r\n\r\n    gameOver() {\r\n        this.game.gameOver();\r\n        // 关闭碰撞检测\r\n        this.CollManager.enabled = false;\r\n        // 显示游戏结束图\r\n        this.gameOverSp.active = true;\r\n    },\r\n});\r\n"]}