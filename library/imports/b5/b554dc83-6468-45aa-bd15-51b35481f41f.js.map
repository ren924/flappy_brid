{"version":3,"sources":["assets\\Scripts\\pipes.js"],"names":["cc","Class","Component","properties","pipePrefab","type","Prefab","pipeSpeed","onLoad","init","game","start","update","dt","gameStatus","GameStatus","Game_Playing","pipesChild","node","children","c","length","x","gainScore","spawnNewPipe","destroy","pipe","instantiate","addChild","minY","maxY","y","Math","random","resetPipePos"],"mappings":";;;;;;AAAA;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGL;AACAC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFD,KADJ;AAMRC,IAAAA,SAAS,EAAE;AANH,GAJP;AAaL;AAEAC,EAAAA,MAfK,oBAeI,CAAE,CAfN;AAiBLC,EAAAA,IAAI,EAAE,cAAUC,IAAV,EAAgB;AAClB,SAAKA,IAAL,GAAYA,IAAZ;AACH,GAnBI;AAqBLC,EAAAA,KArBK,mBAqBG,CACP,CAtBI;AAwBLC,EAAAA,MAxBK,kBAwBEC,EAxBF,EAwBM;AACP;AACA,QAAI,KAAKH,IAAL,CAAUI,UAAV,IAAwBC,iBAAWC,YAAvC,EAAqD;AAEjD,UAAIC,UAAU,GAAG,KAAKC,IAAL,CAAUC,QAA3B;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,UAAU,CAACI,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC;AACAH,QAAAA,UAAU,CAACG,CAAD,CAAV,CAAcE,CAAd,IAAmB,CAAnB,CAFwC,CAGxC;;AACA,YAAIL,UAAU,CAACG,CAAD,CAAV,CAAcE,CAAd,IAAmB,CAAC,EAAxB,EAA4B;AACxB,eAAKZ,IAAL,CAAUa,SAAV;AACH,SANuC,CAOxC;;;AACA,YAAIN,UAAU,CAACG,CAAD,CAAV,CAAcE,CAAd,IAAmB,CAAC,EAAxB,EAA4B;AAAE,eAAKE,YAAL;AAAsB;;AAAA,SARZ,CASxC;;AACA,YAAIP,UAAU,CAACG,CAAD,CAAV,CAAcE,CAAd,IAAmB,CAAC,GAAxB,EAA6B;AACzBL,UAAAA,UAAU,CAACG,CAAD,CAAV,CAAcK,OAAd;AACH;AACJ;AACJ;;AAAA;AACJ,GA5CI;AA8CL;AACAD,EAAAA,YAAY,EAAE,wBAAY;AACtB,QAAIE,IAAI,GAAG1B,EAAE,CAAC2B,WAAH,CAAe,KAAKvB,UAApB,CAAX;AACA,SAAKc,IAAL,CAAUU,QAAV,CAAmBF,IAAnB;AACAA,IAAAA,IAAI,CAACJ,CAAL,GAAS,GAAT;AACA,QAAIO,IAAI,GAAG,CAAC,GAAZ;AAAA,QAAiBC,IAAI,GAAG,GAAxB;AACAJ,IAAAA,IAAI,CAACK,CAAL,GAASF,IAAI,GAAGG,IAAI,CAACC,MAAL,MAAiBH,IAAI,GAAGD,IAAxB,CAAhB;AACH,GArDI;AAuDL;AACAK,EAAAA,YAAY,EAAE,wBAAY;AACtB,QAAIjB,UAAU,GAAG,KAAKC,IAAL,CAAUC,QAA3B;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,UAAU,CAACI,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxCH,MAAAA,UAAU,CAACG,CAAD,CAAV,CAAcK,OAAd;AACH;;AACD,SAAKD,YAAL;AACH;AA9DI,CAAT","sourceRoot":"/","sourcesContent":["import { GameStatus } from './enum';\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    // 水管预制资源\r\n    properties: {\r\n        pipePrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        pipeSpeed: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {},\r\n\r\n    init: function (game) {\r\n        this.game = game;\r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n        // 若游戏不处于进行中，则不进行后续操作\r\n        if (this.game.gameStatus == GameStatus.Game_Playing) {\r\n\r\n            let pipesChild = this.node.children;\r\n            for (let c = 0; c < pipesChild.length; c++) {\r\n                // 移动水管\r\n                pipesChild[c].x -= 1;\r\n                // 判断鸟越过水管\r\n                if (pipesChild[c].x == -34) {\r\n                    this.game.gainScore();\r\n                }\r\n                // 生成新水管\r\n                if (pipesChild[c].x == -50) { this.spawnNewPipe(); };\r\n                // 销毁水管\r\n                if (pipesChild[c].x <= -170) {\r\n                    pipesChild[c].destroy();\r\n                }\r\n            }\r\n        };\r\n    },\r\n\r\n    // 生成新水管\r\n    spawnNewPipe: function () {\r\n        let pipe = cc.instantiate(this.pipePrefab);\r\n        this.node.addChild(pipe);\r\n        pipe.x = 170;\r\n        let minY = -100, maxY = 100;\r\n        pipe.y = minY + Math.random() * (maxY - minY);\r\n    },\r\n\r\n    // 开始游戏时，重置水管位置\r\n    resetPipePos: function () {\r\n        let pipesChild = this.node.children;\r\n        for (let c = 0; c < pipesChild.length; c++) {\r\n            pipesChild[c].destroy();\r\n        }\r\n        this.spawnNewPipe();\r\n    }\r\n});\r\n"]}